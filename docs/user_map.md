# user_map関連の仕様

## 権限指定(**\_right**で終わるパラメータ)
**user\_map**を使った各種の権限指定のパラメータ(**\_right**で終わるパラメータ)は、以下の判定処理の記述を|で結合した文字列を指定します。結合した判定処理は倫理和(or)で処理されます。判定結果が正常にならない場合は、スクリプトは実行されません。

|記述文字列|意味|
| :--- | :--- |
|空文字|所有者が空の時に正常と判断します。|
|`=`|でユーザ名と所有者名が一致する場合に処理を実行します。ただし、cats\_getexecおよびcats\_multi\_getexecでは、無効な指定です。|
|`*`|ユーザ名が正常なものであれば、正常と判断します。|
|`@グループ名`|@の後ろのグループ名のグループに利用者のユーザ名が含まれる場合に正常と判断します。グループは**user_map**パラメータのファイルで定義します。|
|`@`(グループ名がない@)|**user_map**に利用者のユーザ名が記述されていれば、正常と判断します。|

## **user\_map**の詳細
**user\_map**で指定されたファイルで、ユーザ名とグループ名のマッピングを行います。  
このファイルはテキストファイルで、各行にユーザ名とその所属するグループ名(無し及び複数も可)を記述ことで、ユーザ名とグループ名のマッピングを表現します。

各行は以下のような書式になります。

``` plaintext
ユーザ名1:グループ名1 グループ名2 ...
```

ユーザ名とグループ名の間は「:」で区切ります。グループ名が複数の場合は「 」(空白文字)で区切ります。

## user\_map\_configファイルの詳細

**user\_map\_config**は、ユーザ名とグループ名の扱いを定義するファイルです。  
許容されるユーザ名とグループ名を、以下のように、正規表現で表現します。

```
user_regex = '^[a-z_][0-9a-z_\-]{0,32}$'
group_regex = '^[a-z_][0-9a-z_\-]{0,32}$'
```

|パラメータ名|意味|
| :--- | :--- |
|**user\_regex**|ユーザ名として許可する文字列の正規表現です。|
|**group\_regex**|グループ名として許可する文字列の正規表現です。|
